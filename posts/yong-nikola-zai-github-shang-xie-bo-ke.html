<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="zh_cn">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>用 Nikola 在 GitHub 上写博客 | 赵骥's Site</title>
<link href="../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../rss.xml">
<link rel="canonical" href="https://qiwulun.github.io/posts/yong-nikola-zai-github-shang-xie-bo-ke.html">
<!--[if lt IE 9]><script src="../assets/js/html5.js"></script><![endif]--><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
<link href="../mycss/tweak.css" rel="stylesheet" type="text/css">
<base target="_parent">
<meta name="author" content="Zhao JI">
<link rel="prev" href="first-post.html" title="Linux 软件整理" type="text/html">
<link rel="next" href="python-xiang-guan-de-nei-rong.html" title="Python 相关的内容" type="text/html">
<meta property="og:site_name" content="赵骥's Site">
<meta property="og:title" content="用 Nikola 在 GitHub 上写博客">
<meta property="og:url" content="https://qiwulun.github.io/posts/yong-nikola-zai-github-shang-xie-bo-ke.html">
<meta property="og:description" content="使用 Jekyll, Hexo 等框架在 GitHub Pages 上搭建静态个人博客越来越流行。



而我选用 Nikola 框架的原因是他原生支持 org-mode 文件的解析。此外，它是用 python 写成的，对于我这种不会 Ruby 的人，更为有亲和力。


 



1 安装 Nikola


安装 Nikola 非常简单 pip install Nikola[extras]



">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2016-10-21T22:36:11+08:00">
<meta property="article:tag" content="mathjax">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">跳到主内容</a>

<!-- Menubar -->

<nav class="navbar navbar-inverse navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://qiwulun.github.io/">

                <span id="blog-title">赵骥's Site</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li>
<a href="../archive.html">文章存档</a>
                </li>
<li>
<a href="../galleries/">图库</a>
                </li>
<li>
<a href="../categories/">标签</a>
                </li>
<li>
<a href="../rss.xml">RSS 源</a>

                
            </li>
</ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">用 Nikola 在 GitHub 上写博客</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn">
                    Zhao JI
            </span></p>
            <p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2016-10-21T22:36:11+08:00" itemprop="datePublished" title="2016-10-21 22:36">2016-10-21 22:36</time></a></p>
            

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <hr>
<p>
使用 Jekyll, Hexo 等框架在 GitHub Pages 上搭建静态个人博客越来越流行。
</p>

<p>
而我选用 Nikola 框架的原因是他原生支持 org-mode 文件的解析。此外，它是用 python 写成的，对于我这种不会 Ruby 的人，更为有亲和力。
</p>

<!-- TEASER_END --> 


<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">
<span class="section-number-2">1</span> 安装 Nikola</h2>
<div class="outline-text-2" id="text-1">
<p>
安装 Nikola 非常简单 <code>pip install Nikola[extras]</code>
</p>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">
<span class="section-number-2">2</span> 新建一个 GitHub pages</h2>
<div class="outline-text-2" id="text-2">
<p>
新建一个空的 GitHub Repository, 并 clone 到你的电脑上
</p>

<div class="highlight"><pre><span></span>$ git clone git@github.com:&lt;username&gt;.github.io.git ~/blog
</pre></div>

<p>
这个库将包含两个分支：master 渲染好的网页， sources 原始文件。所以我们要新建一个分支 sources
</p>

<div class="highlight"><pre><span></span>$ cd ~/blog
$ git checkout -b sources
</pre></div>

<p>
新建一个 .gitignore 文件
</p>
<pre class="example">
*.py[cod]
__pycache__
cache
output
.doit.db
_env/
</pre>

<p>
commit 到 source 分支
</p>

<div class="highlight"><pre><span></span>$ git add .gitignore
$ git commit -m "Add .gitignore"
</pre></div>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">
<span class="section-number-2">3</span> 建站</h2>
<div class="outline-text-2" id="text-3">
<div class="highlight"><pre><span></span>$ nikola init my_first_site
# Fill the asked information
# 把子文件信息弄到根目录来
$ mv my_first_site/* .
$ rm -r my_first_site
</pre></div>

<div class="highlight"><pre><span></span>$ git add conf.py
$ git commit -m "Add conf.py"
</pre></div>


<p>
所有都设置好了，测试一下效果
</p>

<div class="highlight"><pre><span></span>$ nikola build
$ nikola serve
</pre></div>

<p>
<code>build</code> 用于渲染, <code>serve</code> 在本地测试。打开 <a href="http://localhost:8000">http://localhost:8000</a> 可以看到网页效果，按 C-c 停止
</p>

<p>
还有一个更为激进的自行探测改变并重新编译网站的命令 <code>auto</code>
</p>

<div class="highlight"><pre><span></span>$ nikola auto
</pre></div>

<p>
清空之前的页面
</p>

<div class="highlight"><pre><span></span>$ nikola clean
</pre></div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">
<span class="section-number-2">4</span> 安装支持 org-mode 的官方插件</h2>
<div class="outline-text-2" id="text-4">
<ul class="org-ul">
<li>
<a href="https://plugins.getnikola.com/#orgmode">https://plugins.getnikola.com/#orgmode</a>
</li>

<li>安装的命令 <code>nikola plugin -i orgmode</code>
</li>

<li>把 Configuration 写到conf.py 里
<div class="highlight"><pre><span></span><span class="c1"># Add the orgmode compiler to your COMPILERS dict.</span>
<span class="n">COMPILERS</span><span class="p">[</span><span class="s2">"orgmode"</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="s1">'.org'</span><span class="p">,)</span>

<span class="c1"># Add org files to your POSTS, PAGES</span>
<span class="n">POSTS</span> <span class="o">=</span> <span class="n">POSTS</span> <span class="o">+</span> <span class="p">((</span><span class="s2">"posts/*.org"</span><span class="p">,</span> <span class="s2">"posts"</span><span class="p">,</span> <span class="s2">"post.tmpl"</span><span class="p">),)</span>
<span class="n">PAGES</span> <span class="o">=</span> <span class="n">PAGES</span> <span class="o">+</span> <span class="p">((</span><span class="s2">"stories/*.org"</span><span class="p">,</span> <span class="s2">"stories"</span><span class="p">,</span> <span class="s2">"story.tmpl"</span><span class="p">),)</span>
</pre></div>
</li>
<li>提交
<div class="highlight"><pre><span></span>$ git add plugins/orgmode conf.py
$ git commit -m "Add org-mode support"
</pre></div>
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">
<span class="section-number-2">5</span> 写新文章</h2>
<div class="outline-text-2" id="text-5">
<div class="highlight"><pre><span></span>$ nikola new_post -e -f orgmode
</pre></div>

<p>
<code>-e</code> 是打开文件进行编辑
<code>-f</code> 是指定 format，此处是使用 <code>orgmode</code> 格式
</p>

<p>
当然也可以手动在 posts/ 目录下新建文档, 还可以在里面新建多层目录, 非常灵活. metadata 中比较重要的有:
</p>
</div>

<div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1">
<span class="section-number-3">5.1</span> metadata</h3>
<div class="outline-text-3" id="text-5-1">
</div>
<div id="outline-container-sec-5-1-1" class="outline-4">
<h4 id="sec-5-1-1">
<span class="section-number-4">5.1.1</span> tags 中可包含多个标签, 用逗号隔开.</h4>
<div class="outline-text-4" id="text-5-1-1">
<p>
<code>draft</code> 表示该文不会被收入索引, 但它默认会被发布. 禁止发布带有 draft 标签的草稿, 在设置文件 conf.py 中设置 DEPLOY<sub>DRAFTS</sub> 为 False. 当然前提是 DEPLOY<sub>COMMANDS</sub> 中没包含 nikola build.
</p>

<p>
tags 中含有 <code>private</code> 的post不会被收入索引, 但会被发布. 通过网址可以直接被访问到.
</p>

<p>
要显示latex公式, 需要在post的 tags 里加入 mathjax.
</p>
</div>
</div>
<div id="outline-container-sec-5-1-2" class="outline-4">
<h4 id="sec-5-1-2">
<span class="section-number-4">5.1.2</span> Post Types:</h4>
<div class="outline-text-4" id="text-5-1-2">
<p>
text and micro. 前者为普通文章, 后者为微博.
</p>
</div>
</div>
<div id="outline-container-sec-5-1-3" class="outline-4">
<h4 id="sec-5-1-3">
<span class="section-number-4">5.1.3</span> nocomments:</h4>
<div class="outline-text-4" id="text-5-1-3">
<p>
设置为 True 可以禁止本文的评论
</p>
</div>
</div>
<div id="outline-container-sec-5-1-4" class="outline-4">
<h4 id="sec-5-1-4">
<span class="section-number-4">5.1.4</span> password:</h4>
<div class="outline-text-4" id="text-5-1-4">
<p>
可以为文章设置密码, 访问者需要输入密码才可以打开页面.
</p>
</div>
</div>
</div>
<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2">
<span class="section-number-3">5.2</span> Math</h3>
<div class="outline-text-3" id="text-5-2">
<p>
要显示latex公式, 需要在post的 tags 里加入 mathjax.
</p>

<p>
inline math 不再支持 \(inline\) 形式, 而使用 \(inline\) (有的情况下需要使用 \\(inline\\)), 如
</p>

<p>
Euler’s formula: \(e^{ix} = \cos x + i\sin x\)
在reST文件中还可以使用 :math: (推荐):
</p>

<p>
Euler’s formula: :math:`e<sup>ix</sup> = cos x + isin x`
display math 使用 \[\], reST中推荐下面这种形式:
</p>
<pre class="example">
.. math::

   \int \frac{dx}{1+ax}=\frac{1}{a}\ln(1+ax)+C
</pre>


<p>
\(a^2+b^2=c^2\)
</p>

<p>
\[a^2+b^2=c^2\]
</p>
</div>
</div>
</div>

<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">
<span class="section-number-2">6</span> 发布到 GitHub 上</h2>
<div class="outline-text-2" id="text-6">
<p>
修改 conf.py 文件
</p>

<div class="highlight"><pre><span></span><span class="n">GITHUB_SOURCE_BRANCH</span> <span class="o">=</span> <span class="s1">'sources'</span>
<span class="n">GITHUB_DEPLOY_BRANCH</span> <span class="o">=</span> <span class="s1">'master'</span>
</pre></div>

<p>
使用下面的命令发布到 github 上
</p>
<div class="highlight"><pre><span></span>$ nikola github_deploy
</pre></div>
</div>
</div>


<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7">
<span class="section-number-2">7</span> 配置</h2>
<div class="outline-text-2" id="text-7">
<p>
有三个配置文件, nikola 的 conf.py 和 orgmode 插件中 conf.el 和 init.el
</p>
</div>
<div id="outline-container-sec-7-1" class="outline-3">
<h3 id="sec-7-1">
<span class="section-number-3">7.1</span> 更改模板</h3>
<div class="outline-text-3" id="text-7-1">
<p>
Nikola 提供大量的模板，见这里，
</p>

<p>
安装的命令
</p>
<div class="highlight"><pre><span></span>$ nikola install_theme &lt;theme_name&gt;
</pre></div>

<p>
更改 <code>conf.py</code> 来选择模板， 
</p>
<div class="highlight"><pre><span></span><span class="n">THEME</span> <span class="o">=</span> <span class="s2">"&lt;theme_name&gt;"</span>
</pre></div>

<p>
有些模板要进一步配置，请看他们的网页说明。
</p>

<p>
Themes can be found here <a href="https://themes.getnikola.com/">https://themes.getnikola.com/</a>
</p>

<p>
and installed with nikola install<sub>theme</sub> themename. Here bootstrap3 is a very good choice among them, since it supports Bootswatch <a href="https://bootswatch.com/">https://bootswatch.com/</a> schemes. For example, to use Superhero scheme on this page <a href="https://bootswatch.com/superhero/">https://bootswatch.com/superhero/</a> , just run
</p>

<div class="highlight"><pre><span></span>$ nikola install_theme bootstrap3
$ nikola bootswatch_theme -n custum_theme -s superhero -p bootstrap3
</pre></div>

<p>
after installing bootstrap3 theme. To enable this custom scheme, you need set <code>THEME</code> to <code>custom</code> in conf.py.
</p>

<p>
To further tweak your theme, please refer to Theming Nikola.
</p>
</div>
</div>

<div id="outline-container-sec-7-2" class="outline-3">
<h3 id="sec-7-2">
<span class="section-number-3">7.2</span> 图片显示</h3>
<div class="outline-text-3" id="text-7-2">
<p>
图片插入有一点小问题，输出的路径必须比实际路径更上一层，比如
<code>../images/logo.png</code> 要写成 <code>../../images/logo.png</code> ，不然在网页中就找不到了
</p>

<p>
为了让图片在 <code>org</code> 文件中与网页中都能正常显示，我们要改一个 <code>conf.py</code> 的设定，不然错一层文件夹，显示不出来
</p>

<p>
'images': 'posts/images'
</p>
</div>
</div>

<div id="outline-container-sec-7-3" class="outline-3">
<h3 id="sec-7-3">
<span class="section-number-3">7.3</span> 语法高亮</h3>
<div class="outline-text-3" id="text-7-3">
<p>
默认使用 <code>pygments</code> ，可以在 <code>init.el</code> 或 <code>conf.el</code> 中把
<code>nikola-use-pygments</code> 改成 <code>nil</code> 来取消它。
</p>

<p>
为了正常显示语法高亮，需要增加相应的 <code>custom.css</code> ，并确保 <code>custom.css</code> 被 <code>theme</code> 使用了
</p>

<p>
用 pygmentize 生成相应的 css 文件， &lt;PYGMENTS<sub>STYLE</sub>&gt; 可以用 <code>pygmentize -L style</code> 查看，比如 colorful,friendly
</p>

<div class="highlight"><pre><span></span>mkdir -p files/assets/css
pygmentize -S &lt;PYGMENTS_STYLE&gt; -a .highlight -f html &gt;&gt; files/assets/css/custom.css
</pre></div>
</div>
</div>


<div id="outline-container-sec-7-4" class="outline-3">
<h3 id="sec-7-4">
<span class="section-number-3">7.4</span> 首页摘要</h3>
<div class="outline-text-3" id="text-7-4">
<p>
INDEX<sub>TEASERS</sub> 设为 True 可以启用teaser. (默认是False，只在 RSS 中显示摘要） 
</p>

<p>
这时只需在每个post中加入 <code>.. TEASER_END</code> (reST文件) 或 <code>&lt;!--TEASER_END--&gt;</code>
 (markdown), 就可以使index page只显示post的第一部 分, 而对于org-mode, 需要
 <code>#+HTML: &lt;!--TEASER_END--&gt;</code> 或者
</p>

<div class="highlight"><pre><span></span>#+BEGIN_HTML
&lt;!--TEASER_END--&gt;
#+END_HTML
</pre></div>
<p>
另外,
</p>

<div class="highlight"><pre><span></span><span class="n">INDEX_READ_MORE_LINK</span> <span class="o">=</span> <span class="s2">""</span>
<span class="n">FEED_READ_MORE_LINK</span> <span class="o">=</span> <span class="s2">""</span>
</pre></div>
<p>
可以禁止掉 “Reader more…”. 个人感觉没有必要, 因为禁掉后读者不能分清楚是否文章在这里真的已经完结还是只是摘要部分.
</p>
</div>
</div>

<div id="outline-container-sec-7-5" class="outline-3">
<h3 id="sec-7-5">
<span class="section-number-3">7.5</span> 使用 markdown 或 ipython 做源文件</h3>
<div class="outline-text-3" id="text-7-5">
<p>
如果页面要使用markdown和ipython notebook, 需要设置 POSTS 与 PAGES 项(下面各增加了后两项, 顺便吐槽在nikola中page居然被叫做story!!!):
</p>

<p>
POSTS = (
    ("posts/*.rst", "posts", "post.tmpl"),
    ("posts/*.txt", "posts", "post.tmpl"),
    ("posts/*.html", "posts", "post.tmpl"),
    ("posts/*.md", "posts", "post.tmpl"),
    ("posts/*.ipynb", "posts", "post.tmpl"),
)
PAGES = (
    ("stories/*.rst", "stories", "story.tmpl"),
    ("stories/*.txt", "stories", "story.tmpl"),
    ("stories/*.html", "stories", "story.tmpl"),
    ("stories/*.md", "stories", "story.tmpl"),
    ("stories/*.ipynb", "stories", "story.tmpl"),
)
</p>
</div>
</div>

<div id="outline-container-sec-7-6" class="outline-3">
<h3 id="sec-7-6">
<span class="section-number-3">7.6</span> 把元数据与文章分离开</h3>
<div class="outline-text-3" id="text-7-6">
<p>
一开始的元数据，如更新时间等都是在 org 文件中的，可以把它们分离到单独的文件中。修改 <code>conf.py</code> 文件
</p>

<div class="highlight"><pre><span></span><span class="n">ONE_FILE_POSTS</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>
</div>
</div>

<div id="outline-container-sec-7-7" class="outline-3">
<h3 id="sec-7-7">
<span class="section-number-3">7.7</span> 显示目录，小标题编号</h3>
<div class="outline-text-3" id="text-7-7">
<p>
在 init.el 文件中修改
</p>
<div class="highlight"><pre><span></span><span class="c1">;;; Add any custom configuration that you would like to 'conf.el'.</span>
<span class="p">(</span><span class="nf">setq</span>
 <span class="nv">nikola-use-pygments</span> <span class="nv">t</span>
 <span class="nv">org-export-with-toc</span> <span class="nv">t</span>
 <span class="nv">org-export-with-section-numbers</span> <span class="nv">nil</span>
 <span class="nv">org-startup-folded</span> <span class="ss">'showeverything</span><span class="p">)</span>
</pre></div>


<p>
也可以用 org 文件头来控制
</p>
<div class="highlight"><pre><span></span>#+OPTIONS: num:t
</pre></div>
</div>
</div>
<div id="outline-container-sec-7-8" class="outline-3">
<h3 id="sec-7-8">
<span class="section-number-3">7.8</span> 站点信息</h3>
<div class="outline-text-3" id="text-7-8">
<p>
在 conf.py 中
</p>
<div class="highlight"><pre><span></span><span class="n">BLOG_AUTHOR</span> <span class="o">=</span> <span class="s2">"Your Name"</span>
<span class="n">BLOG_TITLE</span> <span class="o">=</span> <span class="s2">"Demo Site"</span>
<span class="n">BLOG_URL</span> <span class="o">=</span> <span class="s2">"http://nikola.ralsina.com.ar"</span>
<span class="n">BLOG_EMAIL</span> <span class="o">=</span> <span class="s2">"joe@demo.site"</span>
<span class="n">BLOG_DESCRIPTION</span> <span class="o">=</span> <span class="s2">"This is a demo site for Nikola."</span>
</pre></div>
</div>
</div>

<div id="outline-container-sec-7-9" class="outline-3">
<h3 id="sec-7-9">
<span class="section-number-3">7.9</span> 通用文章信息</h3>
<div class="outline-text-3" id="text-7-9">
<p>
我们可以将一些信息(比如作者)放在 conf.py 中, 这样所有post都不用再指定作者信息了:
</p>

<p>
ADDITIONAL<sub>METADATA</sub> = {
    'author': 'defnil'
}
</p>
</div>
</div>

<div id="outline-container-sec-7-10" class="outline-3">
<h3 id="sec-7-10">
<span class="section-number-3">7.10</span> webassets 加速</h3>
<div class="outline-text-3" id="text-7-10">
<p>
USE<sub>BUNDLES</sub> 设为 True 可以启用webassets (前提是你已经安装了它), 这样可以获得速度上的提升.
</p>
</div>
</div>

<div id="outline-container-sec-7-11" class="outline-3">
<h3 id="sec-7-11">
<span class="section-number-3">7.11</span> 禁止评论功能:</h3>
<div class="outline-text-3" id="text-7-11">
<p>
在 conf.py 中
</p>
<div class="highlight"><pre><span></span><span class="n">COMMENT_SYSTEM</span> <span class="o">=</span> <span class="s2">""</span>
</pre></div>
<p>
也可以选择启用其它的评论支持, 如disqus, facebook等.
</p>
</div>
</div>

<div id="outline-container-sec-7-12" class="outline-3">
<h3 id="sec-7-12">
<span class="section-number-3">7.12</span> RSS</h3>
<div class="outline-text-3" id="text-7-12">
<p>
在 conf.py 中 GENERATE<sub>RSS</sub> 设为 True 默认支持RSS, 如果设为 False, 则会关闭任何与RSS相关的功能. 同时还需要在 NAVIGATION<sub>LINKS</sub> 把和RSS相关的页面去掉
</p>
</div>
</div>

<div id="outline-container-sec-7-13" class="outline-3">
<h3 id="sec-7-13">
<span class="section-number-3">7.13</span> SourceLinks</h3>
<div class="outline-text-3" id="text-7-13">
<p>
在 conf.py 中 去掉Source links, 页面上将不会显示页面源代码的链接
</p>

<div class="highlight"><pre><span></span><span class="n">SHOW_SOURCELINK</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">COPY_SOURCES</span> <span class="o">=</span> <span class="bp">False</span>
</pre></div>
</div>
</div>
<div id="outline-container-sec-7-14" class="outline-3">
<h3 id="sec-7-14">
<span class="section-number-3">7.14</span> Use Custom Domain</h3>
<div class="outline-text-3" id="text-7-14">
<p>
比如, 我们现在已经购买了域名 abc.me, 希望能与刚才创建的Github页面关联. 假设我们用的是上述方法一来管理和发布页面的. 则先在本地的 files/ 目录下添加 CNAME 文件, 其内容很简单, 只有 abc.me. 可以用下面的命令实现:
</p>

<p>
cd C:/home/mynikolasite
echo "abc.me" &gt; files/CNAME
</p>
</div>
</div>
<div id="outline-container-sec-7-15" class="outline-3">
<h3 id="sec-7-15">
<span class="section-number-3">7.15</span> Author Page</h3>
<div class="outline-text-3" id="text-7-15">
<p>
如果你每篇post的作者署名不一致, nikola会判断有多个作者, 因此会自动产生一个Author Page. 当点击每个post上的Author名时, 会转向这名作者的页面. 因此需要按此 说明 <a href="https://getnikola.com/blog/author-pages-in-nikola-v770.html">https://getnikola.com/blog/author-pages-in-nikola-v770.html</a> 进一步设置. 即: 将 AUTHOR<sub>PAGES</sub><sub>ARE</sub><sub>INDEXES</sub> 设为 False, 然后设置每个作者的描述:
</p>

<div class="highlight"><pre><span></span><span class="n">ENABLE_AUTHOR_PAGES</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">AUTHOR_PAGES_ARE_INDEXES</span> <span class="o">=</span> <span class="bp">False</span>
<span class="n">AUTHOR_PATH</span> <span class="o">=</span> <span class="s2">"authors"</span>
<span class="n">AUTHOR_PAGES_DESCRIPTIONS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">DEFAULT_LANG</span><span class="p">:</span> <span class="p">{</span>
	<span class="s2">"defnil"</span><span class="p">:</span> <span class="s2">"Old posts"</span><span class="p">,</span>
	<span class="s2">"YONG"</span><span class="p">:</span> <span class="s2">"^_^"</span>
    <span class="p">},</span>
<span class="p">}</span>
<span class="n">HIDDEN_AUTHORS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Guest'</span><span class="p">]</span>
</pre></div>
<p>
bootstrap3 主题已将这些页面包含在内, 因此作上述设置后就可以直接看到结果了. 如果你要完全禁止这个功能, 也很简单, 将 ENABLE<sub>AUTHOR</sub><sub>PAGES</sub> 设为 False 即可.
</p>
</div>
</div>

<div id="outline-container-sec-7-16" class="outline-3">
<h3 id="sec-7-16">
<span class="section-number-3">7.16</span> Footer</h3>
<div class="outline-text-3" id="text-7-16">
<p>
这里主要是在页面下显示 “Contents 2016 authorname - Powered by Nikola” 字样. 可以在 CONTENT<sub>FOOTER</sub> 中做修改.
</p>
</div>
</div>

<div id="outline-container-sec-7-17" class="outline-3">
<h3 id="sec-7-17">
<span class="section-number-3">7.17</span> Navigation Pane</h3>
<div class="outline-text-3" id="text-7-17">
<p>
可以在 NAVIGATION<sub>LINKS</sub> 里添加要链接的页面即可. 比如新建了一个名为 about.rst 的page (会被存放在 stories/ 目录下), 如果要将它放在导航栏里:
</p>

<p>
NAVIGATION<sub>LINKS</sub> = {
    DEFAULT<sub>LANG</sub>: (
        ("<i>archive.html", "Archive"),
        ("/categories</i>", "Tags"),
        ("/stories/about/index.html", "About"), # need to be changed to /output/index.html after you set your own homepage
        #("/rss.xml", "RSS feed"),
    ),
}
根据 Nikola Handbook <a href="https://getnikola.com/handbook.html">https://getnikola.com/handbook.html</a> 的说法, 导航栏至多支持一级子菜单 “Only one level of submenus is supported”, 可以参照说明设置带子菜单样式的导航栏.
</p>
</div>
</div>

<div id="outline-container-sec-7-18" class="outline-3">
<h3 id="sec-7-18">
<span class="section-number-3">7.18</span> 评论功能 DISQUS</h3>
<div class="outline-text-3" id="text-7-18">
<p>
COMMENT<sub>SYSTEM</sub> = "disqus"
COMMENT<sub>SYSTEM</sub><sub>ID</sub> = "yongch" # your disqus ID
</p>
</div>
</div>

<div id="outline-container-sec-7-19" class="outline-3">
<h3 id="sec-7-19">
<span class="section-number-3">7.19</span> Image Size</h3>
<div class="outline-text-3" id="text-7-19">
<p>
MAX<sub>IMAGE</sub><sub>SIZE</sub> 可以决定图片大小, 设置一个合理的数字可以保证所有页面中的图片不至于太大. 还有其它关于image的选项可以酌情选择.
</p>

<p>
另外所有放在 images/ 下面的图片都会被复制到 output/ 里并且会为每张图片自动生成thumbnail图片. 因此如果不想产生Thumbnail, 就直接把图片放在 files/images/ 目录下.
</p>
</div>
</div>

<div id="outline-container-sec-7-20" class="outline-3">
<h3 id="sec-7-20">
<span class="section-number-3">7.20</span> Set Your Own Homepage</h3>
<div class="outline-text-3" id="text-7-20">
<p>
让网页更像site而不是blog, 这里 <a href="https://getnikola.com/creating-a-site-not-a-blog-with-nikola.html">https://getnikola.com/creating-a-site-not-a-blog-with-nikola.html</a> 有如何建一个site的步骤. 对于已经按blog建立的站点, 我们可以进行下面的改造.
</p>

<div class="highlight"><pre><span></span><span class="n">INDEX_PATH</span> <span class="o">=</span> <span class="s2">"posts"</span>
<span class="n">PAGES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="s2">"stories/*.rst"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="s2">"story.tmpl"</span><span class="p">),</span> <span class="c1"># Must use "" to put generated pages directly under the root directory</span>
    <span class="p">(</span><span class="s2">"stories/*.md"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="s2">"story.tmpl"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"stories/*.org"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="s2">"story.tmpl"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"stories/*.txt"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="s2">"story.tmpl"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"stories/*.html"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="s2">"story.tmpl"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"stories/*.ipynb"</span><span class="p">,</span> <span class="s2">""</span><span class="p">,</span> <span class="s2">"story.tmpl"</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>

<p>
然后我们可以使用 nikola new<sub>page</sub> -t Home 创建一个名为 “Home” 的页面. (slug 改为index). 现在我们还需要根据 output/ 下目录的变化重新调整导航栏, 并且把posts放到 “Blog” 导航栏里.
</p>

<div class="highlight"><pre><span></span><span class="n">NAVIGATION_LINKS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">DEFAULT_LANG</span><span class="p">:</span> <span class="p">(</span>
	<span class="p">(</span><span class="s2">"/posts/"</span><span class="p">,</span> <span class="s2">"Blog"</span><span class="p">),</span>
		    <span class="p">(</span><span class="s2">"/categories/"</span><span class="p">,</span> <span class="s2">"Tags"</span><span class="p">),</span>
	<span class="p">(</span><span class="s2">"/archive.html"</span><span class="p">,</span> <span class="s2">"Archive"</span><span class="p">),</span>
	<span class="p">(</span><span class="s2">"/about/index.html"</span><span class="p">,</span> <span class="s2">"About"</span><span class="p">),</span>
		    <span class="p">(</span><span class="s2">"/rss.xml"</span><span class="p">,</span> <span class="s2">"RSS feed"</span><span class="p">),</span>
    <span class="p">),</span>
<span class="p">}</span>
</pre></div>

<p>
这时可以编辑你自己的 home.rst 了. 也可以直接用我们之前做的 about.rst 链接过来做主页: .. include:: stories/about.rst. 如果你正在使用基于 bootstrap3 的主题, 因为它基于 Bootstrap, 因此任何 Bootstrap 支持的格式都可以用 .rst 来表达. 可以参考 这里 <a href="https://getnikola.com/creating-a-site-not-a-blog-with-nikola.html">https://getnikola.com/creating-a-site-not-a-blog-with-nikola.html</a> 的一个例子来写主页. 更多语法上的参考还可以看 这里 <a href="https://github.com/rougier/bootstrap-rst">https://github.com/rougier/bootstrap-rst</a> .
</p>
</div>
</div>
</div>
<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8">
<span class="section-number-2">8</span> 其它输入格式</h2>
<div class="outline-text-2" id="text-8">
</div>
<div id="outline-container-sec-8-1" class="outline-3">
<h3 id="sec-8-1">
<span class="section-number-3">8.1</span> reST中插入多种格式</h3>
<div class="outline-text-3" id="text-8-1">
</div>
<div id="outline-container-sec-8-1-1" class="outline-4">
<h4 id="sec-8-1-1">
<span class="section-number-4">8.1.1</span> media</h4>
<div class="outline-text-4" id="text-8-1-1">
<pre class="example">
.. media:: http://vimeo.com/72425090
.. media:: http://www.youtube.com/watch?v=wyRpAat5oz0
</pre>
</div>
</div>
<div id="outline-container-sec-8-1-2" class="outline-4">
<h4 id="sec-8-1-2">
<span class="section-number-4">8.1.2</span> YouTube, Vimeo, Soundcloud</h4>
<div class="outline-text-4" id="text-8-1-2">
<pre class="example">
.. youtube:: 8N_tupPBtWQ

.. vimeo:: 20241459

.. vimeo:: 20241459
   :height: 240
   :width: 320

[soundcloud url="http://api.soundcloud.com/tracks/78131362"

.. soundcloud:: 78131362
</pre>
</div>
</div>
<div id="outline-container-sec-8-1-3" class="outline-4">
<h4 id="sec-8-1-3">
<span class="section-number-4">8.1.3</span> Code</h4>
<div class="outline-text-4" id="text-8-1-3">
<pre class="example">
.. code-block:: python
   :number-lines:

   print("Our virtues and our failings are inseparable")
</pre>
</div>
</div>
<div id="outline-container-sec-8-1-4" class="outline-4">
<h4 id="sec-8-1-4">
<span class="section-number-4">8.1.4</span> Listing</h4>
<div class="outline-text-4" id="text-8-1-4">
<p>
将 foo.py 文件放在 LISTINGS<sub>FOLDERS</sub> 指定的目录下.
</p>

<pre class="example">
.. listing:: foo.py python
</pre>
</div>
</div>
<div id="outline-container-sec-8-1-5" class="outline-4">
<h4 id="sec-8-1-5">
<span class="section-number-4">8.1.5</span> Gist</h4>
<div class="outline-text-4" id="text-8-1-5">
<div class="highlight"><pre><span></span>.. gist:: 2395294
</pre></div>
</div>
</div>
<div id="outline-container-sec-8-1-6" class="outline-4">
<h4 id="sec-8-1-6">
<span class="section-number-4">8.1.6</span> Thumbnails</h4>
<div class="outline-text-4" id="text-8-1-6">
<p>
To include an image placed in the images folder (or other folders defined in IMAGEFOLDERS), use the thumbnail directive, like this:
</p>
<pre class="example">
.. thumbnail:: ../tesla.jpg

   Nikola Tesla, the man that invented the 20th century.
</pre>
</div>
</div>
<div id="outline-container-sec-8-1-7" class="outline-4">
<h4 id="sec-8-1-7">
<span class="section-number-4">8.1.7</span> Slideshows</h4>
<div class="outline-text-4" id="text-8-1-7">
<pre class="example">
.. slides::

   /galleries/demo/tesla_conducts_lg.jpg
   /galleries/demo/tesla_lightning2_lg.jpg
   /galleries/demo/tesla4_lg.jpg
   /galleries/demo/tesla_lightning1_lg.jpg
   /galleries/demo/tesla_tower1_lg.jpg
</pre>
</div>
</div>
<div id="outline-container-sec-8-1-8" class="outline-4">
<h4 id="sec-8-1-8">
<span class="section-number-4">8.1.8</span> Chart</h4>
<div class="outline-text-4" id="text-8-1-8">
<p>
可以参考 这里 <a href="http://www.pygal.org/en/latest/">http://www.pygal.org/en/latest/</a>
</p>

<pre class="example">
.. chart:: Bar
   :title: 'Browser usage evolution (in %)'
   :x_labels: ["2002", "2003", "2004", "2005", "2006", "2007"]
   'Firefox', [None, None, 0, 16.6, 25, 31]
   'Chrome',  [None, None, None, None, None, None]
   'IE',      [85.8, 84.6, 84.7, 74.5, 66, 58.6]
   'Others',  [14.2, 15.4, 15.3, 8.9, 9, 10.4]
</pre>
</div>
</div>
<div id="outline-container-sec-8-1-9" class="outline-4">
<h4 id="sec-8-1-9">
<span class="section-number-4">8.1.9</span> Doc</h4>
<div class="outline-text-4" id="text-8-1-9">
<p>
用于跳转到其它页面.
</p>

<pre class="example">
Take a look at :doc:`my other post &lt;creating-a-theme&gt;` about theme creating.
Take a look at :doc:`creating-a-theme` to know how to do it.
</pre>
</div>
</div>
</div>
<div id="outline-container-sec-8-2" class="outline-3">
<h3 id="sec-8-2">
<span class="section-number-3">8.2</span> Markdown</h3>
<div class="outline-text-3" id="text-8-2">
</div>
<div id="outline-container-sec-8-2-1" class="outline-4">
<h4 id="sec-8-2-1">
<span class="section-number-4">8.2.1</span> Set as Default Format</h4>
<div class="outline-text-4" id="text-8-2-1">
<p>
如果要将markdown或者其它格式设置为默认格式, 只需将其放在 POSTS 和 PAGES 第一个位置, 这样以后在执行 nikola new<sub>post</sub> 时不用加参数, 会默认生成 .md 文件:
</p>

<div class="highlight"><pre><span></span><span class="n">POSTS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="s2">"posts/*.md"</span><span class="p">,</span> <span class="s2">"posts"</span><span class="p">,</span> <span class="s2">"post.tmpl"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"posts/*.rst"</span><span class="p">,</span> <span class="s2">"posts"</span><span class="p">,</span> <span class="s2">"post.tmpl"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"posts/*.txt"</span><span class="p">,</span> <span class="s2">"posts"</span><span class="p">,</span> <span class="s2">"post.tmpl"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"posts/*.html"</span><span class="p">,</span> <span class="s2">"posts"</span><span class="p">,</span> <span class="s2">"post.tmpl"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"posts/*.ipynb"</span><span class="p">,</span> <span class="s2">"posts"</span><span class="p">,</span> <span class="s2">"post.tmpl"</span><span class="p">),</span>
<span class="p">)</span>
<span class="n">PAGES</span> <span class="o">=</span> <span class="p">(</span>
    <span class="p">(</span><span class="s2">"stories/*.md"</span><span class="p">,</span> <span class="s2">"stories"</span><span class="p">,</span> <span class="s2">"story.tmpl"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"stories/*.rst"</span><span class="p">,</span> <span class="s2">"stories"</span><span class="p">,</span> <span class="s2">"story.tmpl"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"stories/*.txt"</span><span class="p">,</span> <span class="s2">"stories"</span><span class="p">,</span> <span class="s2">"story.tmpl"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"stories/*.html"</span><span class="p">,</span> <span class="s2">"stories"</span><span class="p">,</span> <span class="s2">"story.tmpl"</span><span class="p">),</span>
    <span class="p">(</span><span class="s2">"stories/*.ipynb"</span><span class="p">,</span> <span class="s2">"stories"</span><span class="p">,</span> <span class="s2">"story.tmpl"</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div id="outline-container-sec-8-2-2" class="outline-4">
<h4 id="sec-8-2-2">
<span class="section-number-4">8.2.2</span> Extensions</h4>
<div class="outline-text-4" id="text-8-2-2">
<p>
nikola默认使用的python-markdown遵循standard markdown 标准, 如果要使用Github Favored Markdown (GFM), 可以利用python-markdown中的一些 extensions 来尽量模拟GFM格式:
</p>

<p>
nl2br: newline to linebreak
fenced-code: fenced code blocks
smart-strong: do not boldify multiple underscores in words
codehilite: syntax highlighting (using Pygments)
footnotes: Footnots in markdown
</p>

<p>
可以设置 conf.py 文件中的 MARKDOWN<sub>EXTENSIONS</sub> 变量来使用这些extensions, 如:
</p>
<div class="highlight"><pre><span></span><span class="n">MARKDOWN_EXTENSIONS</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"nl2br"</span><span class="p">,</span> <span class="s2">"fenced_code"</span><span class="p">,</span> <span class="s2">"footnotes"</span><span class="p">,</span>
<span class="s2">"smart_strong"</span><span class="p">,</span><span class="s2">"codehilite(linenums=True)"</span><span class="p">,</span> <span class="s1">'extra'</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>



<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9">
<span class="section-number-2">9</span> 图库</h2>
<div class="outline-text-2" id="text-9">
<p>
在 gallery 下面新建文件夹就可以了，还可以用文件名来做图片的注释
</p>

<p>
在 Navigation Bar 中手动加上一个链接
</p>
</div>
</div>

<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10">
<span class="section-number-2">10</span> 总结</h2>
<div class="outline-text-2" id="text-10">
<p>
Nikola特性有:
</p>

<ul class="org-ul">
<li>支持LaTeX数学公式(via MathJax)
</li>
<li>原生支持多种文档类型, 包括:
<ul class="org-ul">
<li>reStructuredText (.rst, .txt, 此为默认格式, 故 .txt 文件也是以reStructuredText格式来读取的)
</li>
<li>markdown (.md)
</li>
<li>Jupyter/IPython Notebook (.ipynb)
</li>
<li>HTML (.html)
</li>
<li>PHP (.php)
</li>
<li>Pandoc支持的格式, 如Textile, LaTeX, Emacs Org-Mode, MS Word等 (Pandoc需要手动开启支持, 默认关闭因可能会与已有格式冲突)
</li>
</ul>
</li>
<li>能过插件支持更多类型文档, 例如 Emacs Org-Mode, reST with HTML 5 output 等
</li>
<li>其它特点,
<ul class="org-ul">
<li>比如提供image gallery 模板
</li>
<li>image slideshow 模板,
</li>
<li>个性化的输出路径定制等.
</li>
</ul>
</li>
</ul>
</div>
</div>



<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11">
<span class="section-number-2">11</span> 参考资料</h2>
<div class="outline-text-2" id="text-11">
<p>
<a href="https://streakycobra.github.io/posts/blogging-in-org-mode-with-nikola/">https://streakycobra.github.io/posts/blogging-in-org-mode-with-nikola/</a>
</p>

<p>
HandBook : <a href="https://getnikola.com/handbook.html">https://getnikola.com/handbook.html</a>
</p>

<p>
<a href="http://yongchen.org/posts/build-github-pages-with-nikola/">http://yongchen.org/posts/build-github-pages-with-nikola/</a>
</p>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags"></ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="first-post.html" rel="prev" title="Linux 软件整理">前一篇</a>
            </li>
            <li class="next">
                <a href="python-xiang-guan-de-nei-rong.html" rel="next" title="Python 相关的内容">后一篇</a>
            </li>
        </ul></nav></aside><script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"> </script><script type="text/x-mathjax-config">
            MathJax.Hub.Config({tex2jax: {inlineMath: [['$latex ','$'], ['\\(','\\)']]}});
            </script></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2016         <a href="mailto:qiwulun08@gmail.com">Zhao JI</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            
        </footer>
</div>
</div>


            <script src="../assets/js/all-nocdn.js"></script><script src="../assets/js/colorbox-i18n/jquery.colorbox-zh-CN.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("zh-cn");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
